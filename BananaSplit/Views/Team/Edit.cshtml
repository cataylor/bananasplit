@model BananaSplit.Data.Team

@{
    ViewBag.Title = "BananaSplit: Edit Team";
    Layout = "~/Views/Shared/_LayoutPageMetro.cshtml";
}

<h2 class="insettext">Edit Team Information</h2>

<link rel="stylesheet" href="@Url.Content("~/Content/jquery-ui.css")" type="text/css"/>
<script src="@Url.Content("~/Scripts/jquery-ui-1.8.20.min.js")" type="text/javascript"></script>
<link rel="stylesheet" href="@Url.Content("~/Content/validationEngine.jquery.css")" type="text/css"/>
<link rel="stylesheet" href="@Url.Content("~/Content/template.css")" type="text/css"/>


<script type="text/javascript" src="@Url.Content("~/Scripts/swfobject.js")"></script>
<script type="text/javascript" src="@Url.Content("~/Scripts/jquery.uploadify.v2.1.4.min.js") "></script>


<script>
    $(document).ready(function () {
        $("#myForm").validationEngine();


        $(function () {

            // a workaround for a flaw in the demo system (http://dev.jqueryui.com/ticket/4375), ignore!
            $("#dialog:ui-dialog").dialog("destroy");

            $("#dialog-modal").dialog({ autoOpen: false, modal: true });
            return false;

        });

        $("#myForm").validationEngine();

        $("#uploaded_image_container").hide();

        $('#file_upload').uploadify({
            'uploader': '/Uploadify/uploadify.swf',
            'script': '@Url.Action("UploadPhoto", "Photo")',
            'cancelImg': '/Uploadify/cancel.png',
            'multi': false,
            'folder': '/Uploads',
            'buttonText': 'Select Photo',
            'auto': true,
            'fileExt': '*.jpg;*.gif;*.png',
            'onComplete': function (event, ID, fileObj, response, data) {
                response = $.parseJSON(response);
                if (response.Status == 'OK') {
                    $("#PhotoId").val(response.PhotoId);
                    $("#uploaded_image").attr("src", response.Url);
                    $("#uploaded_image_container").show();
                }
            }
        });

    });

    function showModal() {
        //$("#dialog-modal").dialog('open');
        $("#dialog-modal").dialog('open');
    }
</script>

<div class="curvedborders">

    @using (Html.BeginForm("Edit", "Team", FormMethod.Post, new { id = "myForm" }))
    {
    
        <fieldset>
             @Html.HiddenFor(model => model.TeamId)       
            <input type="hidden" value="true" name="IsActive" id="IsActive"/>

            <div class="editor-label">
                <label>Team Name <span class="redreq">*</span></label>
            </div>
            <div class="editor-field">
                @Html.TextBoxFor(model => model.TeamName, new { style = "width:550px;", @class = "validate[required] text-input" })            
            </div>
     
            <div class="editor-label">
                <label>Team Logo</label>
            </div>
            <div class="editor-field">
                <input id="file_upload" type="file" name="file_upload" />                  
                <input type="hidden" name="PhotoIds" id="PhotoIds" />
                <input type="hidden" name="x1" id="x1" />
                <input type="hidden" name="x2" id="x2" />
                <input type="hidden" name="y1" id="y1" />
                <input type="hidden" name="y2" id="y2" />
                <input type="hidden" name="crop_width" id="crop_width" />
                <input type="hidden" name="crop_height" id="crop_height" />

                
                <div id="uploaded_image_container">
                    @*<a class="img_inline" href="javascript:void(0);" onclick="showImageModal('img_inline', 'http://pathtoimage.com');"><img id="uploaded_image" name="uploaded_image" alt="image" width="100" height="100" /></a>*@
                </div>  
                <div style="display:none;">
                    <div id="img_content" style="padding:10px;">                       
                        <div style="padding:7px;background-color:#eee;overflow:auto;">                        
                            <a class="ovalbutton" id="crop_update_btn" href="javascript:void(0)" onclick="makeCropSelection();"><span>Crop Image</span></a>                        
                            <a class="ovalbutton" style="display:none;margin-left:4px;" id="crop_save_btn" href="javascript:void(0)" onclick="saveCrop();"><span>Save Cropped Image</span></a>
                            <a style="margin-left:12px;" class="ovalbutton" href="javascript:void(0);" onclick="deleteImage('editable_img')"><span>Delete Image</span></a>                        
                        </div>
                        <div id="toggleimagesdiv" style="width:640px;height:960px;position:relative;">
                            <img id="editable_img" alt="Editing Image" />
                            <img style="display:none;" id="cropped_img" alt="Cropped Image" />
                        </div>
                    </div>
                </div>            
            </div>
            
            <div class="editor-label">
                <label>City <span class="redreq">*</span></label>
            </div>
            <div class="editor-field">                
                @Html.TextBoxFor(model => model.Location.City, new { style = "width:350px;", @class = "validate[required] text-input" })                          
            </div>

            <div class="editor-label">
                <label>State <span class="redreq">*</span></label>
            </div>
            <div class="editor-field">
                <select name="StateId" id="StateId" class="validate[required]">                    

                     @foreach (var item in ViewBag.States)
                {
                    if (Model.Location.StateId == @item.StateId)
                    {
                        <option value='@item.StateId' selected="selected">@item.StateName</option>                               
                    }
                    else
                    {
                        <option value='@item.StateId'>@item.StateName</option>                               
                    }
                }
                </select>
            </div>

            <p style="padding-top:26px">
            
                @*<a href="#" class="submit" onclick="jQuery('#myForm').validationEngine('validate'))" id="cssbutton">Create Venue</a>*@
                <input type="submit" value="  Update Team   " />
            </p>
        </fieldset>

    }

</div>



<div>
	@Html.ActionLink("Back To List", "Index", "Team")    
</div>


